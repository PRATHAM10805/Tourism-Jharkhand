"use strict";(()=>{var e={};e.id=948,e.ids=[948],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27006:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>S,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>y,staticGenerationAsyncStorage:()=>f});var a={};r.r(a),r.d(a,{GET:()=>u});var n=r(49303),i=r(88716),o=r(60670),c=r(87070);let s=[{id:1,category:"Handicrafts",tags:["Handmade","Traditional","Eco-friendly"],price:2500,rating:4.8,location:"Hazaribagh"},{id:2,category:"Homestays",tags:["Cultural","Authentic","Family-friendly"],price:1200,rating:4.9,location:"Netarhat"},{id:3,category:"Experiences",tags:["Workshop","Traditional","Hands-on"],price:800,rating:4.7,location:"Ranchi"}],l={user_123:{preferredCategories:["Handicrafts","Experiences"],priceRange:{min:500,max:3e3},interests:["Traditional","Handmade","Cultural"],previousPurchases:[1,3],location:"Ranchi"}};function d(e,t=5){let r=l[e];if(!r)return[];let a=[];return r.previousPurchases.forEach(e=>{let t=s.find(t=>t.id===e);t&&s.forEach(r=>{let n;if(r.id===e||a.find(e=>e.id===r.id))return;let i=(n=0,t.category===r.category&&(n+=.3),n+=t.tags.filter(e=>r.tags.includes(e)).length/Math.max(t.tags.length,r.tags.length)*.4+(1-Math.abs(t.price-r.price)/Math.max(t.price,r.price))*.2,t.location===r.location&&(n+=.1),n);i>.3&&a.push({...r,recommendationScore:i,reason:`Similar to your previous purchase: ${t.category}`})})}),a.sort((e,t)=>t.recommendationScore-e.recommendationScore).slice(0,t)}function m(e,t=5){let r=l[e];return r?s.filter(e=>!!r.preferredCategories.includes(e.category)&&!(e.price<r.priceRange.min)&&!(e.price>r.priceRange.max)&&e.tags.some(e=>r.interests.includes(e))).map(e=>{let t;t=.3;let a=e.tags.filter(e=>r.interests.includes(e));return t+=a.length/r.interests.length*.4+e.rating/5*.2,e.location===r.location&&(t+=.1),{...e,recommendationScore:t,reason:`Matches your interests: ${a.join(", ")}`}}).sort((e,t)=>t.recommendationScore-e.recommendationScore).slice(0,t):[]}function p(e=5){return s.map(e=>({...e,recommendationScore:.7*e.rating+.3*Math.random(),reason:"Trending in your area"})).sort((e,t)=>t.recommendationScore-e.recommendationScore).slice(0,e)}async function u(e){try{let{searchParams:t}=new URL(e.url),r=t.get("userId"),a=t.get("type")||"mixed",n=parseInt(t.get("limit")||"10"),i=[];switch(a){case"collaborative":i=r?d(r,n):[];break;case"content":i=r?m(r,n):[];break;case"trending":i=p(n);break;default:if(r){let e=d(r,Math.ceil(n/3)),t=m(r,Math.ceil(n/3)),a=p(Math.ceil(n/3));i=[...e,...t,...a].sort((e,t)=>t.recommendationScore-e.recommendationScore).slice(0,n)}else i=p(n)}return c.NextResponse.json({recommendations:i,algorithm:a,timestamp:new Date().toISOString()})}catch(e){return c.NextResponse.json({error:"Failed to get recommendations"},{status:500})}}let g=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/marketplace/recommendations/route",pathname:"/api/marketplace/recommendations",filename:"route",bundlePath:"app/api/marketplace/recommendations/route"},resolvedPagePath:"C:\\Users\\priya\\OneDrive\\Desktop\\Tourism-Jharkhand\\app\\api\\marketplace\\recommendations\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:y}=g,x="/api/marketplace/recommendations/route";function S(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:f})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,972],()=>r(27006));module.exports=a})();